<!DOCTYPE html>
<html lang="en" style="height:100%;">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>数据概览</title>
    <!-- Bootstrap core CSS -->
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="lib/jquery-3.2.1.min.js"></script>
    <script src="lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="lib/echarts.min.js"></script>
    <script src="lib/echarts-gl.js"></script>

    <style>
        /*
         * Global add-ons
         */
        
        .sub-header {
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        /*
         * Top navigation
         * Hide default border to remove 1px line.
         */
        
        .navbar-fixed-top {
            border: 0;
        }
        /*
         * Sidebar
         */
        /* Hide for mobile, show later */
        
        .sidebar {
            display: none;
        }
        
        @media (min-width: 768px) {
            .sidebar {
                position: fixed;
                top: 51px;
                bottom: 0;
                left: 0;
                z-index: 1000;
                display: block;
                padding: 20px;
                overflow-x: hidden;
                overflow-y: auto;
                /* Scrollable contents if viewport is shorter than content. */
                background-color: #f5f5f5;
                border-right: 1px solid #eee;
            }
        }
        /*
         * Main content
         */
        
        .main {
            padding: 20px;
        }
        
        @media (min-width: 768px) {
            .main {
                padding-right: 40px;
                padding-left: 40px;
            }
        }
        
        .main .page-header {
            margin-top: 0;
        }
        /*
         * Placeholder dashboard ideas
         */
        
        .placeholders {
            margin-bottom: 30px;
            text-align: center;
        }
        
        .placeholders h4 {
            margin-bottom: 0;
        }
        
        .placeholder {
            margin-bottom: 20px;
        }
        
        .placeholder img {
            display: inline-block;
            border-radius: 50%;
        }
        
        .jumbotron {
            text-align: left;
            padding: 20px;
        }
        
        .jumbotron p {
            font-size: inherit;
        }
        
        .big-character {
            margin-right: 40px;
            font-size: 24px;
            color: #53ad7d;
        }
        
        .chart-box {
            height: 500px;
            background-color: #eef3f7;
        }
        
        .btn-close {
            font-size: 16px;
            color: #286090;
        }
        
        .detail-panel {
            margin-left: -40px;
            margin-top: -40px;
            text-align: center;
            position: absolute;
            top: 103px;
            background: white;
            width: 88%;
            min-width: 800px;
            padding: 40px;
            display: none;
        }
        
        .detail-main-page {
            display: none;
        }
        
        .detail-waiting-page {
            height: 400px;
        }
        
        .detail-external-page {
            display: none;
        }
        
        .detail-external-page.active {
            display: block;
        }
        
        .terminal-box {
            width: 100%;
            background: #3f3f3f;
            color: white;
            font-family: Courier New;
        }
        
        .host-detail {
            cursor: pointer;
        }
        
        .breadcrumb-nav {
            height: 75px;
            padding: 20px 40px 20px 40px;
            background-color: #262D37;
            ;
            box-shadow: 0 1px 3px #ddd;
        }
        
        .breadcrumb-nav .breadcrumb-svg {
            height: 30px;
            width: 30px;
            vertical-align: top;
            margin-right: 10px;
        }
        
        .breadcrumb-nav .breadcrumb-span {
            font-size: 24px;
            color: #FFFFFF;
        }
        .chartClass{
            width: 760px;
            height: 500px;
            float: left;
        }
        .chartClassWrapper{
            position: absolute;
            border: 1px solid #1C3D6E;
            width: 760px;
            height: 500px;
        }
        #chart_img{
            position: absolute;
            top:0;
            right: 0;
            height: 80px;
            width: 120px;
        }

        @keyframes move{
            0%{width:120px;height: 80px}
            100%{width:760px;height: 500px}
        }
        .con-info-vm{
            height: 50px;
            margin: 5px 0px 10px 0px;
        }
        .info-box{
            width: 31%;
            float: left;
            background: #1C2331;
            margin-right: 25px;
            padding: 4px 20px;
            border: 1px solid #1C3D6E;
            line-height: 30px;
        }
        .box-last{
            padding: 0px 15px;
            display: block;
            float: left;
            border-radius: 4px;
            margin-left: 11px;
            margin-top: 5px;
            line-height: 20px;
            height: 20px;
        }
        .one{
            background: #15AAAA;
        }
        .two{
            background: #4A90E2;
        }
        .three{
            background: #A089CF;
        }
        .box-previous{
            float: left;
            color: #fff;
            margin-right: 20px;
        }
    </style>

</head>

<body style="height:100%;">

    <div class="left-nav-wrap">
        <script>
            $('.left-nav-wrap').load('leftNav-black.html');
        </script>
    </div>
    <div class="top-wrap">
        <script>
            $('.top-wrap').load('fix-top-black.html');
        </script>
    </div>
    <div class="breadcrumb-nav" style="margin-left:200px;">
        <img src="image/svg/db.svg" class="breadcrumb-svg" alt="" />
        <span class="breadcrumb-span">能力概览</span>
    </div>

    <div style="padding: 0px;margin-left:200px;height:100%;background-color: #1C2331">
        <div style="padding:15px;width: 100%;height: calc(100% - 75px);">
             <div style="height: 50px;width: 760px;display: inline-block;">
                   <div class="con-info-vm">
                       <div id="box1">
                           <div class="info-box" id="" >
                               <span class="box-previous">数据库: </span>
                               <span class="box-last one">68个</span>
                           </div>
                           <div class="info-box" id="">
                               <span class="box-previous">大数据: </span>
                               <span class="box-last two">28个</span>
                           </div>
                           <div class="info-box" id="" style="margin-right: 0!important;">
                               <span class="box-previous">中间件: </span>
                               <span class="box-last three">49个</span>
                           </div>
                       </div>
                       <div class="info-box" id="box2" style="display: none;">
                           <span class="box-previous">业务能力: </span>
                           <span class="box-last three">108个</span>
                       </div>
                   </div>
               </div>
            <div class="chartClassWrapper">
                <div id="chart1" class="chartClass"></div>
                <div id="chart2" class="hide chartClass"></div>
                <img id="chart_img" onclick="changeOption()" src="image/nengli_chart_2.png" alt="">
            </div>

            <div style="width: 26%;height:100%;float: right;margin-top: 5px;">
                <div id="barChart3" style="margin-bottom:40px;border: 1px solid #1C3D6E;width: 100%;height: 50%;"></div>
                <div id="barChart4" style="border: 1px solid #1C3D6E;width: 100%;height: 50%;"></div>
            </div>
        </div>

    </div>

    <script type="text/javascript">
      var myChart1 = echarts.init(document.getElementById('chart1'));
      var myChart2 = echarts.init(document.getElementById('chart2'));
      var optionNum = 1;
      // 3D图的配置信息
      var index = ['0','1', '2', '3', '4', '5', '6'];
      var category = ['数据库', '大数据', '中间件'];
      var data2 = [[0,0,5,'zookeper'],
        [0,0,13,'redis'],
        [1,0,15,'mysql'],
        [2,0,11,'mongodb'],
        [3,0,12,'oracle'],
        [4,0,5,'memcache'],
        [5,0,10,'dubbo'],
        [6,0,2,'sping cloud'],

        [0,1,2,'hive'],
        [1,1,1,'HDFS'],
        [2,1,2,'spark'],
        [3,1,3,'MapReduce'],
        [4,1,8,'Hadoop'],
        [5,1,5,'Flume'],
        [6,1,7,'Yarn'],

        [0,2,16,'tomcat'],
        [1,2,11,'zookeeper'],
        [2,2,2,'nginx'],
        [3,2,3,'httpd'],
        [4,2,8,'BES'],
        [5,2,9,'jdk']
      ];
      option2 = {
        // backgroundImage: linear-gradient('-30deg, #181E2D 0%, #12285D 43%, #162E66 57%, #15346B 100%'),
        /* backgroundColor:{
           color: {
             type: 'linear',
             x: 0,
             y: 0,
             z: 0,
             x2: 0,
             y2: 1,
             z2: 1,
             colorStops: [{
               offset: 0, color: '#181E2D'
             }, {
               offset: 1, color: '#15346B'
             }]
           }
         },*/
        backgroundColor:'#12285D',
        tooltip:{
          padding:15,
          backgroundColor:'#03263E',
          borderColor: '#294A66',
          textStyle:{
            fontSize: '14',
            color: '#48ADFF',
          },
          formatter: function (obj) {
            console.log("ooooo:" + obj);
            return obj.name + '<br/>调用次数：' +obj.value[2];
          }
        },
        visualMap: {
          max: 30,
          inRange: {
            color: ['#004189', '#5CC6F1', '#83B1D3','#C98D9F', '#C98D9F', '#EA7C86']      }
        },
        xAxis3D: {
          show: 'false',
          name: '',
          type: 'category',
          data: index
        },
        yAxis3D: {
          show: 'false',
          name: '',
          type: 'category',
          data: category,
          nameTextStyle: {
            color: 'red'
          }
        },
        zAxis3D: {
          name: '',
          type: 'value',
          nameTextStyle: {
            color: 'red'
          }
        },
        grid3D: {
          axisLine:{
            lineStyle: {
              color: '#46F3FF'
            }
          },
          splitLine: {
            show: true,
            interval: {
              color: ['#fff000'],
              opacity: 1,
              width: 1,
            },
          },
          splitArea: {
            show: false,
            /*interval: {
              color: ['#ff00ff','#00ff00'],
              opacity: 0.1,
              width: 1
            }*/
          },
          boxWidth: 200,
          boxDepth: 80,
          viewControl: {
            // projection: 'orthographic'
          },
          light: {
            main: {
              intensity: 1.2,
              shadow: false
            },
            ambient: {
              intensity: 0.3
            }
          },
          // backgroundImage: linear-gradient('-30deg, #181E2D 0%, #12285D 43%, #162E66 57%, #15346B 100%'),

          environment: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
            offset: 0, color: '#0F417B' // 天空颜色
          }, {
            offset: 0.7, color: '#000000' // 地面颜色
          }, {
            offset: 1, color: '#131C32' // 地面颜色
          }], false)
        },
        series: [{
          type: 'bar3D',
          data: data2.map(function (item) {
            return {
              name: item[3],
              value: [item[0], item[1], item[2]],
            }
          }),
          shading: 'lambert',

          label: {
            show: false,
            textStyle: {
              fontSize: 16,
              borderWidth: 1
            }
          },

          emphasis: {
            label: {
              show: false,
              textStyle: {
                fontSize: 14,
                color: 'red'
              }
            },
            itemStyle: {
              color: '#34D3FD'
            }
          }
        }]
      };
      // 圆形图的配置信息
      var data = [{
        name: '业务能力',
        itemStyle: {
          color: '#1A8FE0'
        },
        children: [{
          name: '查询',
          itemStyle: {
            color: '#1E88DB'
          },
          children: [{
            name: '查询预算信息服务',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          }, {
            name: '查询采购目录信息服务',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          }, {
            name: '预算项目查询服务',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          }, {
            name: '预算项目查询服务',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          }, {
            name: '查询应付发票列账信息服务',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          }, {
            name: '查询资产地点服务（上市）',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          }, {
            name: '摊销费用实际发生数查询服务',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          }, {
            name: '预算部门查询服务',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          }, {
            name: '预算科目查询服务',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          }, {
            name: '预算品牌查询服务',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          },{
            name: '查询客户地址信息',
            value: 1,
            itemStyle: {
              color: '#00AFFF'
            }
          }]
        }, {
          name: '导入',
          itemStyle: {
            color: '#56CEDF'
          },
          children: [{
            name: '导入值集（上市）',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '导入值集（TD）',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '收款发票导入子服务',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '退换票通知导入服务',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '薪酬发放导入应付状态信息',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '导入采购订单信息',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '导入合同基本信息服务',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '导入红字发票信息',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '导入总帐TD',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '应收导入',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '导入呆滞物资信息服务',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '导入应付发票TD',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }, {
            name: '导入薪酬发放报账单审批退回信息服务',
            value: 1,
            itemStyle: {
              color: '#00DFFF'
            }
          }]
        }, {
          name: '同步',
          itemStyle: {
            color: '#7E99F4'
          },
          children: [{
            name: '供应商信息同步服务',
            value: 1,
            itemStyle: {
              color: '#7889BC'
            }
          }, {
            name: '同步OU组织',
            value: 1,
            itemStyle: {
              color: '#7889BC'
            }
          }, {
            name: '同步ERP账户组合信息服务',
            value: 1,
            itemStyle: {
              color: '#7889BC'
            }
          }, {
            name: '同步供应商银行信息',
            value: 1,
            itemStyle: {
              color: '#7889BC'
            }
          }, {
            name: '同步供应商账户信息',
            value: 1,
            itemStyle: {
              color: '#7889BC'
            }
          },{
            name: '同步收款方法头信息',
            value: 1,
            itemStyle: {
              color: '#7889BC'
            }
          }, {
            name: '同步资产账簿信息',
            value: 1,
            itemStyle: {
              color: '#7889BC'
            }
          }]
        }, {
          name: '验证',
          itemStyle: {
            color: '#F6BD5D'
          },
          children: [{
            name: '验证发票导入状态信息',
            value: 1,
            itemStyle: {
              color: '#BFA172'
            }
          }, {
            name: '验证总账导入服务',
            value: 1,
            itemStyle: {
              color: '#BFA172'
            }
          }, {
            name: '验证应收发票导入结果服务',
            value: 1,
            itemStyle: {
              color: '#BFA172'
            }
          }]
        }, {
          name: '其他',
          itemStyle: {
            color: '#FE7278'
          },
          children: [{
            name: '回传支付状态服务',
            value: 1,
            itemStyle: {
              color: '#C6848A'
            }
          }, {
            name: '日期弹性域配置服务',
            value: 1,
            itemStyle: {
              color: '#C6848A'
            }
          }, {
            name: '预算资源释放服务',
            value: 1,
            itemStyle: {
              color: '#C6848A'
            }
          }, {
            name: 'ERP总账凭证导',
            value: 1,
            itemStyle: {
              color: '#C6848A'
            }
          }]
        }]
      }];

      option = {
        title: {
          textStyle: {
            fontSize: 8,
            align: 'center'
          },
          subtextStyle: {
            align: 'center'
          }
        },
        grid: {
          left: '10%',
          right: '10%',
          top: '10%',
          bottom: 130
        },
        color: '#fff',
        series: {
          type: 'sunburst',
          data: data,
          radius: [0, '95%'],
          center: ['50%', '48%'],
          sort: null,
          label: {
            color: '#fff'
          },
          levels: [{
            itemStyle: {
              color: '#1C2331'
            },
            highlight: {
              itemStyle: {
                color: '#1C2331'
              }
            },
          }, {
            r0: '15%',
            r: '35%',
            highlight: {
              itemStyle: {
                color: '#1A8FE0'
              }
            },
            emphasis: {
              itemStyle: {
                color: '#1A8FE0'
              }
            },
            itemStyle: {
              color: '#1A8FE0',
              borderWidth: 1,
            },
            label: {
              rotate: 'tangential',
            }
          }, {
            r0: '35%',
            r: '50%',
            label: {
              rotate: '90',
            }
          }, {
            r0: '50%',
            r: '51%',
            label: {
              position: 'outside',
              color: 'auto',
              fontWeight: 100,
              textBorderColor: 'auto',
              fontSize: 10
            },
            itemStyle: {
              borderWidth: 0
            }
          }]
        }
      };
      myChart1.setOption(option2);
      myChart2.setOption(option);
      function changeOption() {
        if(optionNum == 1) {
          $('#chart_img').css('animation','move 2s');
          setTimeout(function () {
            $('#chart2').removeClass('hide');
            $('#chart1').addClass('hide');
            $('#chart_img').attr('src','image/nengli_chart_1.png');
            $('#chart_img').css('animation','');
            $('#box1').css('display', 'none');
            $('#box2').css('display', 'block');
          }, 2000);
          optionNum = 2;
        } else {
          $('#chart_img').css('animation','move 2s');
          setTimeout(function () {
            $('#chart1').removeClass('hide');
            $('#chart2').addClass('hide');
            $('#chart_img').attr('src','image/nengli_chart_2.png');
            $('#chart_img').css('animation','');
            $('#box2').css('display', 'none');
            $('#box1').css('display', 'block');
          }, 2000);
          optionNum = 1;
        }
      };
    </script>
    <script type="text/javascript">
      var barChart3 = echarts.init(document.getElementById('barChart3'));
      var barChart4 = echarts.init(document.getElementById('barChart4'));
      var barChartoption3 = {
        title: {
          text: '公共能力调用Top10',
          left:5,
          top:5,
          textStyle: {
            color: '#ccc',
            fontSize: 14,
          }
        },
        label: {
          normal: {
            show: false
          }
        },
        textStyle: {
          color: '#9AA1B0'
        },
        tooltip : {
          trigger: 'axis',
          formatter: '{a}:{c}个',
          axisPointer : {            // 坐标轴指示器，坐标轴触发有效
            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
          }
        },
        calculable: true,
        xAxis: [
          {
            type: 'category',
            data: ['tomcat', 'Mysql', 'redis','Oracle','zookeeper','mongodb','dubbo','Hadoop', 'BES','Yarn'],
            axisLabel: {
              rotate: -40,
              interval: 0
            },
            axisLine: {
              lineStyle: {
                color: '#2d3f64'
              }
            },
            axisTick: {
              show: false
            }
          }
        ],
        grid: {
          x: 57,
          y: 50
        },
        yAxis: [
          {
            type: 'value',
            name: '',
            left:'20%',
            axisLabel: {
              show: true,
              interval: 'auto'
            },
            axisLine: {
              lineStyle: {
                color: '#2d3f64'
              }
            },
            axisTick: {
              show: true
            },
            splitLine: {
              lineStyle: {
                color: '#2d3f64',
                type: 'dotted'
              }
            }
          }],
        series: [
          {
            name: '调用次数',
            type: 'bar',
            data: [16, 15, 13, 12, 11, 11, 10, 8, 8, 7],
            barWidth: '40%',
            itemStyle: {
              normal: {
                color: '#75B8E2',
                barBorderRadius: [10, 10, 0, 0]

              }
            }
          }
        ]
      };
      var barChartoption4 = {
        title: {
          text: '业务能力Top5',
          left:5,
          top:5,
          textStyle: {
            color: '#ccc',
            fontSize: 14,
          }
        },
        label: {
          normal: {
            show: false
          }
        },
        textStyle: {
          color: '#9AA1B0'
        },
        tooltip : {
          trigger: 'axis',
          formatter: '{a}:{c}个',
          axisPointer : {            // 坐标轴指示器，坐标轴触发有效
            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
          }
        },
        calculable: true,
        xAxis: [
          {
            type: 'category',
            data: ['回传支付状态服务', '查询预算信息服务', '日期弹性域配置服务','预算检查与保留服务','部门映射关系查询服务',],
            axisLabel: {
              rotate: -20,
              interval: 0
            },
            axisLine: {
              lineStyle: {
                color: '#2d3f64',
                fontSize: 10,
              }
            },
            axisTick: {
              show: false
            }
          }
        ],
        grid: {
          x: 57,
          y: 50
        },
        yAxis: [
          {
            type: 'value',
            name: '',
            left:'20%',
            axisLabel: {
              show: true,
              interval: 'auto'
            },
            axisLine: {
              lineStyle: {
                color: '#2d3f64'
              }
            },
            axisTick: {
              show: true
            },
            splitLine: {
              lineStyle: {
                color: '#2d3f64',
                type: 'dotted'
              }
            }
          }],
        series: [
          {
            name: '业务能力',
            type: 'bar',
            data: [582972, 94784, 48019, 36424, 32727],
            barWidth: '40%',
            itemStyle: {
              normal: {
                color: '#869BF6',
                barBorderRadius: [10, 10, 0, 0]

              }
            }
          }
        ]
      };
      barChart3.setOption(barChartoption3);
      barChart4.setOption(barChartoption4);
    </script>
</body>

</html>